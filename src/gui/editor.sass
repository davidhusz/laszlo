$dark-background: #242424
// $light-background: #4f565e
$light-background: #33383e
$info-panel-height: 40%  // needed to adjust the overlay height
// $workspace-height is needed to sync the mixer height with it
// 95% because otherwise we always get a scrollbar for some reason
$workspace-height: max(95%, 2000px)

@mixin center-within
	height: 100%
	margin: auto
	> *
		position: relative
		top: 50%
		transform: translateY(-50%)

@mixin center-text-within
	div
		position: relative
		top: 50%
		transform: translateY(-50%)
		margin: auto
		max-width: 50%
		text-align: center
		font-size: xx-large

@mixin slightly-bigger
	transform: scale(1.05)

@mixin style-scrollbar
	&::-webkit-scrollbar
		// TODO: style scrollbar properly
		// https://developer.mozilla.org/en-US/docs/Web/CSS/::-webkit-scrollbar
		display: none

@font-face
	font-family: area-kilometer
	src: url("AreaKilometer50.ttf")

body
	font-family: area-kilometer
	color: white
	button:not(:disabled)
		cursor: pointer


#main
	position: fixed
	top: 0
	left: 0
	width: 100%
	height: 100%
	background-color: $dark-background
	display: grid
	// TODO: select min values for all but the workspace
	grid-template-columns: 17.5% auto
	grid-template-rows: min-content auto $info-panel-height
	grid-template-areas: "main-menu main-menu" "mixer workspace" "info-panel info-panel"


#main-menu
	grid-area: main-menu
	span
		display: inline-block
		padding: 5px
		opacity: 0.6
		&:hover
			cursor: pointer
			color: $dark-background
			background-color: #e8e8e8


#mixer
	grid-area: mixer
	svg
		width: 100%
		height: $workspace-height
	overflow-y: scroll
	@include style-scrollbar
	margin-right: 5px
	cursor: cell
	
	.track-mixer
		rect
			cursor: initial
			fill: #4f4f4f
		text
			fill: white
			opacity: 0.6
			text-anchor: start
			dominant-baseline: hanging
			cursor: pointer


#workspace
	grid-area: workspace
	background-color: $light-background
	overflow: scroll
	@include style-scrollbar
	svg
		width: max(100%, 3000px)
		height: $workspace-height
	
	.track-separator
		stroke: black
		stroke-dasharray: 8px
	
	.snippet
		rect
			fill: #e8e8e8
			stroke: black
			stroke-width: 2px
			stroke-opacity: 0.25
		text
			fill: black
			opacity: 0.5
		&:hover, &.ref-peek
			cursor: pointer
			@include slightly-bigger
		
		.recording-indicator
			fill: none
			stroke: black
			stroke-width: 1px
			stroke-opacity: 0.75
		&:not(.recording) .recording-indicator
			visibility: hidden
		
		&.clone
			opacity: 0.8
		
		&.selected rect, &.indirectly-selected rect
			fill: #eacd5b
		&.selected
			@include slightly-bigger


#info-panel
	grid-area: info-panel
	width: 100%
	height: 100%
	margin-top: 5px
	display: grid
	// TODO: same as for the other grid
	grid-template-rows: auto 20%
	grid-template-areas: "snippet-info" "selection-count"
	
	.snippet-info
		grid-area: snippet-info
		@include center-within
		width: 100%
		display: grid
		grid-template-rows: auto 10%
		grid-template-areas: "info-table" "master-buttons"
		opacity: 0.75
		// padding: 10px
		table
			grid-area: info-table
			width: max-content
			height: min-content
			margin-left: auto
			margin-right: auto
			th, td
				padding: 2px 10px
			th
				font-weight: normal
				text-align: right
			.snippet-ref
				font-weight: bold
				font-style: italic
				// text-decoration: underline
				&:hover
					cursor: pointer
		.master-buttons
			grid-area: master-buttons
			// @include center-within
			text-align: center
	
	.selection-count
		grid-area: selection-count
		@include center-within
		font-size: x-large
		opacity: 0.5
	
	.add-snippet-area
		@include center-text-within
		opacity: 0.5
		cursor: cell


#choose-snippet-mode-overlay
	position: fixed
	width: 100%
	height: $info-panel-height
	bottom: 0
	left: 0
	background-color: black
	opacity: 0.8
	display: none
	@include center-text-within
	&.active
		display: block
