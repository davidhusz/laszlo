$dark-background: #242424
// $light-background: #4f565e
$light-background: #33383e
$info-panel-height: 40%  // needed to adjust the overlay height

@mixin center-within
	height: 100%
	margin: auto
	> *
		position: relative
		top: 50%
		transform: translateY(-50%)

@mixin slightly-bigger
	transform: scale(1.05)

body
	font-family: sans-serif
	button:not(:disabled)
		cursor: pointer

#main
	position: fixed
	top: 0
	left: 0
	width: 100%
	height: 100%
	background-color: $dark-background
	display: grid
	// TODO: select min values for all but the workspace
	grid-template-columns: 17.5% auto
	grid-template-rows: 5% auto $info-panel-height
	grid-template-areas: "main-menu main-menu" "mixer workspace" "info-panel info-panel"


#main-menu
	grid-area: main-menu


#mixer
	grid-area: mixer
	svg
		width: 100%
		height: 100%
	margin-right: 5px
	
	.track-mixer
		rect
			fill: #4f4f4f
		text
			fill: white
			opacity: 0.6
			text-anchor: start
			dominant-baseline: hanging
			cursor: pointer


#workspace
	grid-area: workspace
	background-color: $light-background
	overflow: scroll
	svg
		width: max(100%, 3000px)
		// 95% because otherwise we always get a scrollbar for some reason
		height: max(95%, 2000px)
	
	.track-separator
		stroke: black
		stroke-dasharray: 8px
	
	.snippet
		rect
			fill: #e8e8e8
			stroke: black
			stroke-width: 2px
			stroke-opacity: 0.25
		text
			fill: black
			opacity: 0.5
		&:hover, &.ref-peek
			cursor: pointer
			@include slightly-bigger
		
		.recording-indicator
			fill: none
			stroke: black
			stroke-width: 1px
			stroke-opacity: 0.75
		&:not(.recording) .recording-indicator
			visibility: hidden
		
		&.clone
			opacity: 0.8
		
		&.selected rect, &.indirectly-selected rect
			fill: #eacd5b
		&.selected
			@include slightly-bigger


#info-panel
	grid-area: info-panel
	width: 100%
	height: 100%
	margin-top: 5px
	display: grid
	// TODO: same as for the other grid
	grid-template-rows: auto 20%
	grid-template-areas: "snippet-info" "selection-count"
	color: white
	
	.snippet-info
		grid-area: snippet-info
		@include center-within
		display: grid
		grid-template-rows: auto 10%
		grid-template-areas: "info-table" "master-buttons"
		opacity: 0.75
		// padding: 10px
		table
			grid-area: info-table
			height: min-content
			th, td
				padding: 2px 10px
			th
				font-weight: normal
				text-align: right
			.snippet-ref
				font-weight: bold
				&:hover
					// text-decoration: underline
					cursor: pointer
		.master-buttons
			grid-area: master-buttons
			// @include center-within
			text-align: center
	
	.selection-count
		grid-area: selection-count
		@include center-within
		font-size: x-large
		opacity: 0.5


#choose-snippet-mode-overlay
	position: fixed
	width: 100%
	height: $info-panel-height
	bottom: 0
	left: 0
	background-color: black
	opacity: 0.8
	display: none
	&.active
		display: block
	div
		position: relative
		top: 50%
		transform: translateY(-50%)
		margin: 0
		text-align: center
		font-size: xx-large
		color: white
